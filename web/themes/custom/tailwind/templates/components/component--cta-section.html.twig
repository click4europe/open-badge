{# CMS-editable CTA Section component.
   Uses get_cta_section() Twig function to fetch block data from Drupal.
   
   Block type: 'cta_section'
   Required fields in Drupal:
   - field_title (Text)
   - body (Text long)
   - field_primary_link (Link)
   - field_secondary_link (Link) - optional
   - field_background (List: light, dark, muted) - optional

   Usage:
   {% include '@tailwind/components/component--cta-section.html.twig' %}
#}

{% set data = get_cta_section() %}

{% if data %}
  {% embed '@tailwind/components/component--section.html.twig' with {
    id: 'cta-' ~ data.id,
    background: data.background|default('dark'),
    padding: 'py-16 lg:py-20',
  } %}
    {% block section_inner %}
      {# Admin edit link #}
      {% if data.edit_link %}
        <div class="mb-4 text-xs">
          <a href="{{ data.edit_link }}" class="inline-flex items-center gap-1 {% if data.background == 'dark' %}text-slate-300 hover:text-white{% else %}text-sky-600 hover:text-sky-700{% endif %} underline">
            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
            Edit Section
          </a>
        </div>
      {% endif %}

      <div class="max-w-3xl {% if data.background == 'dark' %}text-center mx-auto{% endif %}">
        {% if data.title %}
          <h2 class="text-2xl sm:text-3xl font-bold mb-4">{{ data.title }}</h2>
        {% endif %}
        
        {% if data.description %}
          <p class="{% if data.background == 'dark' %}text-slate-300{% else %}text-slate-600{% endif %} text-sm sm:text-base mb-6">
            {{ data.description }}
          </p>
        {% endif %}

        {% if data.primary_link_url or data.secondary_link_url %}
          <div class="flex flex-wrap {% if data.background == 'dark' %}justify-center{% endif %} gap-4">
            {% if data.primary_link_url %}
              {% include '@tailwind/components/component--button.html.twig' with {
                label: data.primary_link_label,
                url: data.primary_link_url,
                variant: 'primary',
                size: 'lg',
              } %}
            {% endif %}
            {% if data.secondary_link_url %}
              {% include '@tailwind/components/component--button.html.twig' with {
                label: data.secondary_link_label,
                url: data.secondary_link_url,
                variant: data.background == 'dark' ? 'ghost' : 'secondary',
                size: 'lg',
              } %}
            {% endif %}
          </div>
        {% endif %}
      </div>
    {% endblock %}
  {% endembed %}
{% endif %}

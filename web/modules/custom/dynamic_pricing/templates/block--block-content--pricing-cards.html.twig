{#
/**
 * @file
 * Template for the pricing cards block.
 */
#}
{%
  set classes = [
    'block',
    'block-' ~ configuration.provider|clean_class,
    'block-' ~ plugin_id|clean_class,
  ]
%}

<section{{ attributes.addClass(classes).addClass('py-16 lg:py-24 bg-slate-50') }}>
  {# Manual edit button for admins when rendered via drupal_entity #}
  {% if elements['#block_content'] and user.hasPermission('administer blocks') %}
    <div class="absolute top-4 right-4 z-50">
      <a href="/admin/content/block/{{ elements['#block_content'].id.value }}?destination={{ 'now'|date('U') }}" class="inline-flex items-center gap-1 bg-white/95 hover:bg-white text-slate-700 hover:text-slate-900 px-3 py-1.5 rounded-full shadow-lg border border-slate-200 text-xs font-medium transition-all duration-200">
        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
        </svg>
        Modifica Blocco
      </a>
    </div>
  {% endif %}
  
  <div class="max-w-7xl mx-auto px-4 sm:px-6">
    
    {# Section Header #}
    <div class="text-center mb-12">
      <h2 class="text-3xl sm:text-4xl font-bold text-slate-900 mb-3">Scegli il piano perfetto per te</h2>
      <p class="text-base text-slate-600 mb-10">Prezzi trasparenti, nessun costo nascosto</p>
      
      {# Monthly/Yearly Toggle - You can add this as a field to the block if needed #}
      <div class="inline-flex items-center bg-white rounded-full p-1.5 shadow-sm border border-slate-200">
        <button id="monthly-toggle" class="pricing-toggle px-8 py-2.5 rounded-full text-sm font-semibold transition-all duration-200 bg-blue-600 text-white">
          Mensile
        </button>
        <button id="yearly-toggle" class="pricing-toggle px-8 py-2.5 rounded-full text-sm font-semibold transition-all duration-200 text-slate-600 hover:text-slate-900">
          Annuale
        </button>
      </div>
    </div>

    {# Pricing Cards Grid #}
    <div class="mx-auto">
      {{ content.field_pricing_cards }}
    </div>
  </div>
</section>

{# JavaScript for Dropdown Toggle #}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Pricing Dropdown Toggle with Animation
    const dropdownToggles = document.querySelectorAll('.pricing-dropdown-toggle');
    
    dropdownToggles.forEach(function(toggle) {
      toggle.addEventListener('click', function() {
        const targetId = this.getAttribute('data-target');
        const targetContent = document.getElementById(targetId);
        const icon = this.querySelector('.dropdown-icon');
        
        if (targetContent.classList.contains('hidden')) {
          // Open
          targetContent.classList.remove('hidden');
          setTimeout(() => {
            targetContent.style.maxHeight = targetContent.scrollHeight + 'px';
          }, 10);
          icon.style.transform = 'rotate(180deg)';
        } else {
          // Close
          targetContent.style.maxHeight = '0';
          setTimeout(() => {
            targetContent.classList.add('hidden');
          }, 300);
          icon.style.transform = 'rotate(0deg)';
        }
      });
    });
  });
</script>

{#
/**
 * @file
 * Default theme implementation to display a webform page.
 *
 * Available variables:
 * - data: Array containing node data
 * - target_id: Webform ID if exists
 */
#}
<div{{ attributes.addClass('main-wrapper', 'webform-page') }}>
  <div class="container mx-auto px-4">
    <div class="main-container">
      <main id="main" class="main-content">
        <div class="node-content">
          <div class="block-region region-content">
            <div class="block">
              <div class="block-content">
                <article class="node node-view-mode-full" role="article">
                  
                  <div class="node-content clear">
                    {% if data.scheda.sotto_titolo.0.value %}
                      <h1 class="page-title text-3xl font-bold mb-6">{{ data.scheda.sotto_titolo.0.value }}</h1>
                    {% endif %}
                    
                    {% if data.scheda.image.path %}
                      <div class="field field--name-field-image mb-6">  
                        <img 
                          src="{{ data.scheda.image.path }}" 
                          width="850" 
                          height="400" 
                          alt="{{ data.scheda.image.alt }}" 
                          class="image-field rounded-lg shadow-md w-full"
                        />
                      </div>
                    {% endif %}
                    
                    {% if data.scheda.body %}
                      <div property="schema:text" class="field field--name-body field--type-text-with-summary field-item prose prose-lg max-w-none mb-8">
                        {{ data.scheda.body|raw }}
                      </div>
                    {% endif %}
                    
                    {# Webform #}
                    {% if target_id %}
                      <div class="webform-form-content my-8 p-6 bg-gray-50 rounded-lg">
                        {{ drupal_entity('webform', target_id) }}
                      </div>
                    {% endif %}
                    
                    {# FAQ Accordion #}
                    {% if data.scheda.field_faq %}
                      <div class="scheda-faq mt-8">
                        <h2 class="text-2xl font-bold mb-4">{{ 'Frequently Asked Questions'|t }}</h2>
                        <div class="space-y-4">
                          {% for key, faq in data.scheda.field_faq %}
                            <div class="border border-gray-200 rounded-lg">
                              <button class="accordion-button w-full px-6 py-4 text-left bg-gray-50 hover:bg-gray-100 transition-colors flex justify-between items-center">
                                <span class="font-semibold">{{ faq.question }}</span>
                                <svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                              </button>
                              <div class="accordion-content hidden px-6 py-4">
                                <div class="prose prose-sm">
                                  {{ faq.answer|raw }}
                                </div>
                              </div>
                            </div>
                          {% endfor %}
                        </div>
                      </div>
                    {% endif %}
                    
                  </div>
                </article>
              </div>
            </div>
          </div>
        </div>
      </main>
      
      {# Sidebar #}
      <aside id="sidebar-right" class="sidebar block-section w-full lg:w-1/3 mt-8 lg:mt-0 lg:pl-8" role="complementary">
        <div class="block-region region-sidebar-second">
          {% if data.scheda.personalizzati %}
            {% for key, value in data.scheda.personalizzati %}
              <div class="mb-6">
                {{ drupal_entity('block_content', value.target_id) }}
              </div>
            {% endfor %}
          {% endif %}
        </div>
      </aside>
      
    </div>
  </div>
</div>